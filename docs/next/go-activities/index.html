<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Temporal Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Temporal Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-163137879-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-163137879-1",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Temporal" href="/opensearch.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-163137879-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-163137879-1")</script><title data-react-helmet="true">Activities | Temporal</title><meta data-react-helmet="true" name="docsearch:version" content="next"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Activities | Temporal"><meta data-react-helmet="true" name="description" content="An activity is the implementation of a particular task in the business logic."><meta data-react-helmet="true" property="og:description" content="An activity is the implementation of a particular task in the business logic."><meta data-react-helmet="true" property="og:url" content="https://temporalio.github.io/docs/next/go-activities"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://temporalio.github.io/docs/next/go-activities"><link rel="stylesheet" href="/styles.69c7f342.css">
<link rel="preload" href="/styles.a7368a58.js" as="script">
<link rel="preload" href="/runtime~main.1420c5f8.js" as="script">
<link rel="preload" href="/main.e4883d78.js" as="script">
<link rel="preload" href="/2.e20b398d.js" as="script">
<link rel="preload" href="/3.0935f851.js" as="script">
<link rel="preload" href="/4.f802603b.js" as="script">
<link rel="preload" href="/1be78505.4c607e03.js" as="script">
<link rel="preload" href="/254.048c9fbc.js" as="script">
<link rel="preload" href="/c6c6e257.034259ed.js" as="script">
<link rel="preload" href="/17896441.f8383723.js" as="script">
<link rel="preload" href="/467a7890.e609a7a8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_OaSq"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/favicon.svg" alt="Temporal logo"><strong class="navbar__title">Temporal</strong></a><a class="navbar__item navbar__link" href="/versions">v0.26.0</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://temporal.io/careers" target="_blank" rel="noopener noreferrer" activeclassname="navbar__link--active" to="https://temporal.io/careers" class="navbar__item navbar__link">Jobs</a><a href="https://github.com/temporalio/temporal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://join.slack.com/t/temporalio/shared_invite/zt-c1e99p8g-beF7~ZZW2HP6gGStXD8Nuw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Slack</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/favicon.svg" alt="Temporal logo"><strong class="navbar__title">Temporal</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/versions">v0.26.0</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/overview">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://temporal.io/careers" target="_blank" rel="noopener noreferrer" activeclassname="navbar__link--active" to="https://temporal.io/careers" class="menu__link">Jobs</a></li><li class="menu__list-item"><a href="https://github.com/temporalio/temporal" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://join.slack.com/t/temporalio/shared_invite/zt-c1e99p8g-beF7~ZZW2HP6gGStXD8Nuw" target="_blank" rel="noopener noreferrer" class="menu__link">Slack</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs sidebarWithHideableNavbar_1-U5"><a tabindex="-1" class="sidebarLogo_3ono" href="/"><img src="/img/favicon.svg" alt="Temporal logo"><strong>Temporal</strong></a><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/license">MIT License</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/installing-server">Installing Temporal</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-periodic">Periodic Execution</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-orchestration">Microservice Orchestration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-polling">Polling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-event-driven">Event Driven Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-partitioned-scan">Storage Scan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-batch-job">Batch Job</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-provisioning">Infrastructure Provisioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-cicd">CI/CD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-operational-management">Operational Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-interactive">Interactive Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-dsl">DSL Workflows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/use-cases-big-ml">Big Data and ML</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Learn</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-glossary">Glossary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-workflows">Workflows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-activities">Activities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-events">Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-queries">Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-topology">Deployment Topology</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-task-queues">Task Queues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-server-configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-archival">Archival</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-cross-dc-replication">Cross-DC Replication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-workflow-filtering">Filtering Workflows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/learn-cli">Command Line Interface</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Java SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/java-quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/java-workflow-interface">Workflow Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/java-implementing-workflows">Implementing Workflows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/java-starting-workflow-executions">Starting workflow executions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/java-activity-interface">Activity Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/java-implementing-activities">Implementing activities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/java-versioning">Versioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/java-distributed-cron">Distributed CRON</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Go SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-sdk-video-tutorial">SDK Video Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-workers">Worker Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-create-workflows">Creating Workflows</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/go-activities">Activities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-execute-activity">Executing Activities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-child-workflows">Child Workflows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-retries">Activity and Workflow Retries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-signals">Signals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-continue-as-new">ContinueAsNew</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-side-effect">SideEffect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-queries">Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-activity-async-completion">Asynchronous Activity Completion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-workflow-testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-versioning">Versioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-sessions">Sessions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-distributed-cron">Distributed CRON</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/go-tracing">Tracing and Context Propagation</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Temporal <strong>next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/overview">latest version</a></strong>.</div></div><div class="docItemContainer_2cwg"><article><div><span class="badge badge--secondary">Version: next</span></div><header><h1 class="docTitle_1vWb">Activities</h1></header><div class="markdown"><p>An activity is the implementation of a particular task in the business logic.</p><p>Activities are implemented as functions. Data can be passed directly to an activity via function
parameters. The parameters can be either basic types or structs, with the only requirement being that
the parameters must be serializable. Though it is not required, we recommend that the first parameter
of an activity function is of type <code>context.Context</code>, in order to allow the activity to interact with
other framework methods. The function must return an <code>error</code> value, and can optionally return a result
value. The result value can be either a basic type or a struct with the only requirement being that
it is serializable.</p><p>The values passed to activities through invocation parameters or returned through the result value
are recorded in the execution history. The entire execution history is transferred from the Temporal
service to workflow workers with every event that the workflow logic needs to process. A large execution
history can thus adversely impact the performance of your workflow. Therefore, be mindful of the amount
of data you transfer via activity invocation parameters or return values. Otherwise, no additional
limitations exist on activity implementations.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="overview"></a>Overview<a aria-hidden="true" tabindex="-1" class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>The following example demonstrates a simple activity that accepts a string parameter, appends a word
to it, and then returns a result.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-go codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> sample</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;context&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;go.uber.org/zap&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;go.temporal.io/temporal/activity&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// SimpleActivity is a sample Temporal activity function that takes one parameter and</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// returns a string containing the parameter value.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SimpleActivity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    activity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SimpleActivity called.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> zap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Value&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Processed: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>Let&#x27;s take a look at each component of this activity.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="declaration"></a>Declaration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#declaration" title="Direct link to heading">#</a></h3><p>In the Temporal programing model, an activity is implemented with a function. The function declaration specifies the parameters the activity accepts as well as any values it might return. An activity function can take zero or many activity specific parameters and can return one or two values. It must always at least return an error value. The activity function can accept as parameters and return as results any serializable type.</p><p><code>func SimpleActivity(ctx context.Context, value string) (string, error)</code></p><p>The first parameter to the function is context.Context. This is an optional parameter and can be omitted. This parameter is the standard Go context.
The second string parameter is a custom activity specific parameter that can be used to pass data into the activity on start. An activity can have one or more such parameters. All parameters to an activity function must be serializable, which essentially means that params can’t be channels, functions, variadic, or unsafe pointers.
The activity declares two return values: string and error. The string return value is used to return the result of the activity. The error return value is used to indicate that an error was encountered during execution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation" title="Direct link to heading">#</a></h3><p>You can write activity implementation code in the same way that you would any other Go service code.
Additionally, you can use the usual loggers and metrics controllers, and the standard Go concurrency
constructs.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="heart-beating"></a>Heart Beating<a aria-hidden="true" tabindex="-1" class="hash-link" href="#heart-beating" title="Direct link to heading">#</a></h4><p>For long-running activities, Temporal provides an API for the activity code to report both liveness and
progress back to the Temporal managed service.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-go codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">progress </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> hasWork </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Send heartbeat message to the server.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    activity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RecordHeartbeat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> progress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Do some work.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    progress</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>When an activity times out due to a missed heartbeat, the last value of the details (<code>progress</code> in the
above sample) is returned from the <code>workflow.ExecuteActivity</code> function as the details field of <code>TimeoutError</code>
with <code>TimeoutType</code> set to <code>Heartbeat</code>.</p><p>You can also heartbeat an activity from an external source:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-go codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// The client is a heavyweight object that should be created once per process.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">serviceClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Options</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    HostPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     HostPort</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    Namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   Namespace</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    MetricsScope</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> scope</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Record heartbeat.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> serviceClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RecordActivityHeartbeat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> taskToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div></div></div><p>The parameters of the <code>RecordActivityHeartbeat</code> function are:</p><ul><li><code>taskToken</code>: The value of the binary <code>TaskToken</code> field of the <code>ActivityInfo</code> struct retrieved inside
the activity.</li><li><code>details</code>: The serializable payload containing progress information.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="cancellation"></a>Cancellation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cancellation" title="Direct link to heading">#</a></h4><p>When an activity is cancelled, or its workflow execution has completed or failed, the context passed
into its function is cancelled, which sets its channel’s closed state to <code>Done</code>. An activity can use that
to perform any necessary cleanup and abort its execution. Cancellation is only delivered to activities
that call <code>RecordActivityHeartbeat</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="registration"></a>Registration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#registration" title="Direct link to heading">#</a></h3><p>To make the activity visible to the worker process hosting it, the activity must be registered via a
call to <code>activity.Register</code>.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-go codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">activity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SimpleActivity</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div></div></div><p>This call creates an in-memory mapping inside the worker process between the fully qualified function
name and the implementation. If a worker receives a request to start an activity execution for an
activity type it does not know, it will fail that request.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="failing-an-activity"></a>Failing an Activity<a aria-hidden="true" tabindex="-1" class="hash-link" href="#failing-an-activity" title="Direct link to heading">#</a></h2><p>To mark an activity as failed, the activity function must return an error via the <code>error</code> return value.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/temporalio/temporal-documentation-legacy-v2/blob/master/docs/go-activities.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/go-create-workflows"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Creating Workflows</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/go-execute-activity"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Executing Activities »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a><ul><li><a href="#declaration" class="table-of-contents__link">Declaration</a></li><li><a href="#implementation" class="table-of-contents__link">Implementation</a></li><li><a href="#registration" class="table-of-contents__link">Registration</a></li></ul></li><li><a href="#failing-an-activity" class="table-of-contents__link">Failing an Activity</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/java-quick-start">Java SDK</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/go-quick-start">Go SDK</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/temporal-workflow" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://join.slack.com/t/temporalio/shared_invite/zt-c1e99p8g-beF7~ZZW2HP6gGStXD8Nuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/temporalio/temporal" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Temporal Technologies Inc.  All rights reserved. Copyright © 2020 Uber Technologies, Inc.</div></div></div></footer></div>
<script src="/styles.a7368a58.js"></script>
<script src="/runtime~main.1420c5f8.js"></script>
<script src="/main.e4883d78.js"></script>
<script src="/2.e20b398d.js"></script>
<script src="/3.0935f851.js"></script>
<script src="/4.f802603b.js"></script>
<script src="/1be78505.4c607e03.js"></script>
<script src="/254.048c9fbc.js"></script>
<script src="/c6c6e257.034259ed.js"></script>
<script src="/17896441.f8383723.js"></script>
<script src="/467a7890.e609a7a8.js"></script>
</body>
</html>